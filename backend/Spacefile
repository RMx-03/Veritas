# Deta Space configuration
v: 0
micros:
  - name: veritas-api
    src: .
    engine: python3.9
    primary: true
    run: uvicorn main:app
    dev: uvicorn main:app --reload
    presets:
      env:
        - name: OPENROUTER_API_KEY
          description: "OpenRouter API key for AI analysis"
          default: ""
        - name: OPENROUTER_BASE_URL
          description: "OpenRouter base URL"
          default: "https://openrouter.ai/api/v1"
        - name: OPENROUTER_MODEL
          description: "OpenRouter model id (e.g., deepseek/deepseek-r1)"
          default: "deepseek/deepseek-r1"
        - name: OPENROUTER_SITE_URL
          description: "Site URL sent as HTTP-Referer header to OpenRouter"
          default: ""
        - name: OPENROUTER_APP_NAME
          description: "App name sent as X-Title header to OpenRouter"
          default: "Veritas API"
        - name: HUGGINGFACE_API_KEY  
          description: "HuggingFace API key for OCR (TrOCR/Donut)"
          default: ""
        - name: OCR_ENGINE
          description: "OCR engine to use: trocr or donut"
          default: "trocr"
        - name: HF_TROCR_MODEL
          description: "Hugging Face TrOCR model id"
          default: "microsoft/trocr-large-printed"
        - name: HF_DONUT_MODEL
          description: "Hugging Face Donut model id"
          default: "naver-clova-ix/donut-base-finetuned-docvqa"
        - name: USE_LAYOUT_REFINER
          description: "Use optional LayoutLM DocVQA refinement (true/false)"
          default: "false"
        - name: HF_DOCVQA_MODEL
          description: "HF DocVQA/LayoutLM model id"
          default: "impira/layoutlm-document-qa"
        - name: SUPABASE_URL
          description: "Supabase project URL"
          default: ""
        - name: SUPABASE_ANON_KEY
          description: "Supabase anonymous key"
          default: ""
        - name: USDA_API_KEY
          description: "USDA API key (optional)"
          default: ""
