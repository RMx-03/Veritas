# ==============================================
# Veritas Backend Configuration
# ==============================================

# =============== REQUIRED SETTINGS ===============
# These are essential for the app to function

# OpenRouter API (AI Analysis)
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=deepseek/deepseek-r1
OPENROUTER_SITE_URL=http://localhost:8000
OPENROUTER_APP_NAME=Veritas

# Database (Supabase)
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key

# =============== OCR CONFIGURATION ===============
# Modern lightweight OCR pipeline (recommended)
OCR_ENGINE=advanced
OCR_ENGINE_ADVANCED=hybrid
USE_ADVANCED_PREPROCESSING=true

# Warmup (pre-download OCR models to avoid cold-start timeouts)
WARMUP_ON_STARTUP=true
WARMUP_ENGINES=easyocr

# EasyOCR model caching and download control
# On Render, if you attach a Persistent Disk and mount it at /var/data,
# point EasyOCR to persist models there to avoid re-downloading on each deploy.
EASYOCR_MODEL_DIR=/var/data/.EasyOCR
# Allow EasyOCR to download models during analysis if missing.
# Set to false to forbid downloads during requests (ensure warmup ran first).
EASYOCR_DOWNLOAD_ON_DEMAND=true

# =============== OPTIONAL SETTINGS ===============

# External APIs
HUGGINGFACE_API_KEY=your_huggingface_api_key_here
USDA_API_KEY=your_usda_api_key_here
OPENFOODFACTS_BASE_URL=https://world.openfoodfacts.org/api/v0/product/
DOCTR_API_MODEL=microsoft/trocr-small-printed

# Legacy OCR (requires heavy ML dependencies)
# OCR_ENGINE=trocr
# HF_TROCR_MODEL=microsoft/trocr-large-printed
# HF_DONUT_MODEL=naver-clova-ix/donut-base-finetuned-docvqa

# Layout refinement (advanced)
USE_LAYOUT_REFINER=false
HF_DOCVQA_MODEL=impira/layoutlm-document-qa

# Tesseract OCR path (system-specific)
# TESSERACT_CMD=C:\\Program Files\\Tesseract-OCR\\tesseract.exe  # Windows
# TESSERACT_CMD=/opt/homebrew/bin/tesseract  # macOS

# Production settings
# Comma-separated list. Use '*' only in development.
ALLOWED_ORIGINS=http://localhost:3000,https://your-app.vercel.app
# Max upload size in MB for /analyze endpoint
MAX_UPLOAD_MB=10
# Simple per-IP requests per minute limit for built-in rate limiter
RATE_LIMIT_PER_MINUTE=120
